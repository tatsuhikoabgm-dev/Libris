<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
  <meta charset="UTF-8">
  <title>会員登録 | Libris</title>

  <link rel="stylesheet" th:href="@{/css/auth.css}">
  <link rel="stylesheet" th:href="@{/css/auth-register.css}">
</head>

<body>

<div class="auth-wrapper">
  <div class="auth-card auth-card--wide">

    <div class="auth-title">会員登録</div>

    <div th:if="${msg}" class="message-success" th:text="${msg}"></div>

    <form th:action="@{/user/register/confirm}"
          method="post"
          th:object="${userRegisterForm}">

      <!-- メール -->
      <div class="form-group">
        <label class="form-label">メールアドレス</label>
        <input class="form-input" th:field="*{email}">
        <div class="error-msg" th:errors="*{email}"></div>
      </div>

      <div class="form-group">
        <label class="form-label">メールアドレス（確認）</label>
        <input class="form-input" th:field="*{emailConfirm}">
        <div class="error-msg"
             th:if="${!#fields.hasErrors('email')}"
             th:errors="*{emailConfirm}">
        </div>
      </div>

      <!-- 表示名 -->
      <div class="form-group">
        <label class="form-label">表示名（任意）</label>
        <input class="form-input" th:field="*{displayName}">
        <div class="error-msg" th:errors="*{displayName}"></div>
      </div>

      <!-- ログインID -->
      <div class="form-group">
        <label class="form-label">
          ログインID
          <span class="form-hint">（4〜50文字の半角英数字）</span>
        </label>
        <input class="form-input" th:field="*{loginId}">
        <div class="error-msg" th:errors="*{loginId}"></div>
      </div>

      <!-- パスワード -->
      <div class="form-row-2">

        <div class="form-col">
          <label class="form-label">パスワード</label>
          <input type="password" id="password"
                 class="form-input"
                 th:field="*{password}">

          <label class="show-password">
            <input type="checkbox" onclick="togglePassword()">
            パスワードを表示する
          </label>

          <div class="form-hint">
            英字と数字を組み合わせて8〜16文字
          </div>

          <div class="error-msg" th:errors="*{password}"></div>
        </div>

        <div class="form-col">
          <label class="form-label">パスワード（確認）</label>
          <input type="password" id="passwordConfirm"
                 class="form-input"
                 th:field="*{passwordConfirm}">

          <div class="error-msg"
               th:if="${!#fields.hasErrors('password')}"
               th:errors="*{passwordConfirm}">
          </div>
        </div>

      </div>

      <button type="submit" class="auth-btn">
        確認画面へ
      </button>

    </form>

  </div>
</div>

<script>
  function togglePassword() {
    const pw = document.getElementById("password");
    const cf = document.getElementById("passwordConfirm");
    const type = pw.type === "password" ? "text" : "password";
    pw.type = type;
    cf.type = type;
  }
</script>

</body>
</html>
