<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">

<head>
	<meta charset="UTF-8" />
	<title>パスワード変更 | Libris</title>

	<link rel="stylesheet" href="/css/base.css">
	<link rel="stylesheet" href="/css/nav.css">
	<link rel="stylesheet" href="/css/mypage.css">
	<link rel="stylesheet" href="/css/mypage-password.css">
</head>

<body>

	<div th:replace="layout/fragments/nav :: nav"></div>

	<!-- ===== CONTENT ===== -->
	<div class="wrapper">

		<div class="password-header">
			<div class="page-title">パスワード変更</div>
			<div class="page-sub">
				現在のパスワードを確認し、新しいパスワードを設定します。
			</div>
		</div>

		<div class="card password-card">
			<div class="section-title">パスワード変更</div>

			<div class="note">
				※ パスワードは大文字・小文字・数字を含む8〜16文字の半角英数字で入力してください。
			</div>

			<form th:action="@{/mypage/password}"
				  th:object="${passwordChangeForm}"
				  method="post">

				<input type="hidden" name="returnTo" th:value="${returnTo}" />

				<div class="form-grid">

					<!-- 現在のパスワード -->
					<div class="form-item">
						<label>現在のパスワード</label>
						<input type="password"
							   id="oldPassword"
							   th:field="*{oldPassword}">

						<div class="checkbox">
							<label>
								<input type="checkbox" id="showOld">
								パスワードを表示
							</label>
						</div>

						<div class="error" th:errors="*{oldPassword}"></div>
					</div>

					<!-- 新しいパスワード -->
					<div class="form-item">
						<label>新しいパスワード</label>
						<input type="password"
							   id="newPassword"
							   th:field="*{password}">
						<div class="error" th:errors="*{password}"></div>
					</div>

					<!-- 新しいパスワード（確認） -->
					<div class="form-item">
						<label>新しいパスワード（確認）</label>
						<input type="password"
							   id="newPasswordConfirm"
							   th:field="*{passwordConfirm}">

						<div class="checkbox">
							<label>
								<input type="checkbox" id="showNew">
								パスワードを表示
							</label>
						</div>

						<div class="error" th:errors="*{passwordConfirm}"></div>
					</div>

				</div>

				<div class="actions">
					<button type="submit" class="btn btn-primary">
						変更内容を確認
					</button>
				</div>

			</form>
		</div>

	</div>

	<!-- ===== JS : 表示 / 非表示 ===== -->
	<script>
		document.getElementById("showOld").addEventListener("change", function () {
			document.getElementById("oldPassword").type =
				this.checked ? "text" : "password";
		});

		document.getElementById("showNew").addEventListener("change", function () {
			const type = this.checked ? "text" : "password";
			document.getElementById("newPassword").type = type;
			document.getElementById("newPasswordConfirm").type = type;
		});
	</script>

</body>
</html>
