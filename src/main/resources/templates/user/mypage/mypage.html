<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">

<head>
	<meta charset="UTF-8" />
	<title>マイページ | Libris</title>
	
	<link rel="stylesheet" th:href="@{/css/base.css}">
	<link rel="stylesheet" th:href="@{/css/nav.css}">
	<link rel="stylesheet" th:href="@{/css/mypage.css}">
	<link rel="stylesheet" th:href="@{/css/footer.css}">

</head>

<body>

	<div th:replace="layout/fragments/nav :: nav"></div>

	<div class="wrapper">
		<div class="page-head">
			<div>
				<div class="page-title">マイページ</div>
				<div class="page-sub">
					会員情報の確認ができます。必要に応じて編集してください。
				</div>
			</div>

			<!-- 右上に軽く歓迎（表示名があれば表示名、なければ読書家さん） -->
			<div class="page-sub" th:text="${session.SESSION_USER != null
      && session.SESSION_USER.displayName != null
      && !#strings.isEmpty(session.SESSION_USER.displayName)
      ? session.SESSION_USER.displayName + 'さん'
      : '読書家さん'}">読書家さん</div>
		</div>

		<!-- 変更完了メッセージ（param.msg or flash msg想定） -->
		<div class="message message-success" th:if="${successMessage}">
			<strong th:text="${successMessage}"></strong>
		</div>


		<div class="card">
			<div class="section-title">会員情報</div>

			<div class="grid">
				<!-- 氏名 -->
				<div class="item">
					<div class="label">姓</div>
					<div class="value" th:text="${#strings.isEmpty(mypage.lastName) ? '（未設定）' : mypage.lastName}">（未設定）
					</div>
				</div>
				<div class="item">
					<div class="label">名</div>
					<div class="value" th:text="${#strings.isEmpty(mypage.firstName) ? '（未設定）' : mypage.firstName}">
						（未設定）</div>
				</div>

				<div class="item">
					<div class="label">姓（カナ）</div>
					<div class="value"
						th:text="${#strings.isEmpty(mypage.lastNameKana) ? '（未設定）' : mypage.lastNameKana}">（未設定）</div>
				</div>
				<div class="item">
					<div class="label">名（カナ）</div>
					<div class="value"
						th:text="${#strings.isEmpty(mypage.firstNameKana) ? '（未設定）' : mypage.firstNameKana}">（未設定）</div>
				</div>

				<!-- 住所（まとめ表示） -->
				<div class="item address-wide">
					<div class="label">住所</div>
					<div class="value">
						<div class="address-line">
							<span class="badge"
								th:text="${#strings.isEmpty(mypage.postalCode) ? '郵便番号：未設定' : '〒' + mypage.postalCode}">郵便番号：未設定</span>
							<span th:text="${#strings.isEmpty(mypage.prefecture) ? '' : mypage.prefecture}"></span>
							<span th:text="${#strings.isEmpty(mypage.city) ? '' : mypage.city}"></span>
							<span th:text="${#strings.isEmpty(mypage.town) ? '' : mypage.town}"></span>
							<span
								th:text="${#strings.isEmpty(mypage.addressNumber) ? '' : mypage.addressNumber}"></span>
							<span th:text="${#strings.isEmpty(mypage.building) ? '' : mypage.building}"></span>
						</div>

						<div class="page-sub address-empty" style="margin-top:8px;" th:if="${#strings.isEmpty(mypage.prefecture)
                    && #strings.isEmpty(mypage.city)
                    && #strings.isEmpty(mypage.town)
                    && #strings.isEmpty(mypage.addressNumber)
                    && #strings.isEmpty(mypage.building)
                    && #strings.isEmpty(mypage.postalCode)}">
							（住所は未設定です）
						</div>
					</div>
				</div>

				<!-- 生年月日・電話 -->
				<div class="item">
					<div class="label">生年月日</div>
					<div class="value" th:text="${#strings.isEmpty(mypage.birthday) ? '（未設定）' : mypage.birthday}">（未設定）
					</div>
				</div>
				<div class="item">
					<div class="label">電話番号</div>
					<div class="value mono"
						th:text="${#strings.isEmpty(mypage.phoneNumber) ? '（未設定）' : mypage.phoneNumber}">（未設定）</div>
				</div>

				<!-- メール・表示名 -->
				<div class="item">
					<div class="label">メールアドレス</div>
					<div class="value mono" th:text="${#strings.isEmpty(mypage.email) ? '（未設定）' : mypage.email}">（未設定）
					</div>
				</div>
				<div class="item">
					<div class="label">アプリ内表示名</div>
					<div class="value" th:text="${#strings.isEmpty(mypage.displayName) ? '読書家さん' : mypage.displayName}">
						読書家さん</div>
				</div>

				<!-- ログインID -->
				<div class="item address-wide">
					<div class="label">ログインID</div>
					<div class="value mono" th:text="${#strings.isEmpty(mypage.loginId) ? '（未設定）' : mypage.loginId}">
						（未設定）</div>
				</div>
			</div>

			<!-- ボタン（設計PDF：会員情報編集／パスワード変更） -->
			<div class="actions">
				<form th:action="@{/mypage/edit}" method="get">
					<button type="submit" class="btn btn-secondary">会員情報の編集</button>
				</form>

				<form th:action="@{/mypage/password}" method="get">
					<input type="hidden" name="returnTo" value="mypage" />
					<button type="submit" class="btn btn-primary">パスワード変更</button>
				</form>

			</div>
		</div>
	</div>
	<div th:replace="layout/fragments/footer :: footer"></div>
	
</body>

</html>